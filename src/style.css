/* src/style.css */

/* --- Custom Property for Animations (if used by patterns) --- */
@property --gh {
	syntax: "<percentage>";
	initial-value: 0%;
	inherits: false;
}

/* --- Global Variables --- */
:root {
	--brad: 0.4rem; /* Base border radius for card effect */
    /* Base colors for patterns (can be overridden per pattern) */
    --pattern-c0: hsla(210, 22%, 20%, 0.7); /* Darker base color (semi-transparent) */
    --pattern-c1: hsla(210, 16%, 30%, 0.7); /* Lighter base color (semi-transparent) */
    --pattern-accent: hsla(30, 80%, 60%, 0.6); /* Example accent color (orange) */
    --pattern-transparent: hsla(0, 0%, 0%, 0); /* Transparent helper */
}


/* --- Base Styles --- */
body {
  margin: 0;
  font-family: 'Inter', sans-serif; /* Base font */
  position: relative;
  min-height: 100vh;
  background-color: #111827; /* Dark background */
  color: #e5e7eb; /* Base text color */
  overflow: hidden; /* Prevent scrolling */
  user-select: none;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
}

#app {
  width: 100%;
  height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
  position: relative;
  z-index: 20; /* Main app container */
}

#cat-container {
  position: fixed;
  top: 0; left: 0; width: 100%; height: 100%;
  pointer-events: none;
  z-index: 10; /* Behind main UI */
  overflow: hidden;
}

/* --- Ink System Styles --- */
#drawing-canvas {
  position: fixed; top: 0; left: 0; width: 100%; height: 100%;
  z-index: 5; pointer-events: none; background-color: transparent;
}
#drawing-canvas.active { pointer-events: auto; cursor: crosshair; z-index: 25; }
/* Fade out quiz wrapper when drawing */
#quiz-interface-wrapper.ui-faded { opacity: 0.3; transition: opacity 0.3s ease-in-out; }
#score-area { display: flex; flex-direction: column; align-items: center; gap: 0.25rem; margin-bottom: 1rem; }
#ink-label { font-size: 0.7rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; color: #f472b6; margin-bottom: 0.1rem; display: none; }
#ink-bar-container { width: 9rem; height: 0.75rem; background-color: #374151; border-radius: 9999px; overflow: hidden; border: 1px solid #4b5563; display: none; }
#ink-bar-fill { height: 100%; background-image: linear-gradient(to right, #a78bfa, #7c3aed); border-radius: 9999px; transition: width 0.3s ease-out; width: 0%; }
#score-area #ink-label:not(.hidden),
#score-area #ink-bar-container:not(.hidden) { display: block; }

/* --- Side Controls --- */
.control-container { position: fixed; right: 1rem; top: 50%; transform: translateY(-50%); display: flex; flex-direction: column; gap: 0.75rem; z-index: 30; }
.control-button { background-color: rgba(31, 41, 55, 0.8); color: #e5e7eb; border: 1px solid #4b5563; border-radius: 0.5rem; padding: 0.6rem; cursor: pointer; transition: background-color 0.2s ease, border-color 0.2s ease, box-shadow 0.2s ease; font-size: 1.5rem; width: 50px; height: 50px; display: flex; justify-content: center; align-items: center; box-shadow: 0 2px 4px rgba(0,0,0,0.3); }
.control-button:hover { background-color: rgba(55, 65, 81, 0.9); border-color: #6b7280; }
.control-button:disabled { opacity: 0.5; cursor: not-allowed; }
#toggle-brush-button.active { background-color: rgba(167, 139, 250, 0.8); border-color: #a78bfa; box-shadow: 0 0 8px rgba(167, 139, 250, 0.5); }
#drawing-buttons-container { display: none; flex-direction: column; gap: 0.75rem; }
#right-controls.drawing-unlocked #drawing-buttons-container { display: flex; }

/* --- Shop Styles --- */
.overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; display: none; opacity: 0; justify-content: center; align-items: center; transition: opacity 0.3s ease-in-out; z-index: 100; }
.blur-backdrop { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(17, 24, 39, 0.5); backdrop-filter: blur(5px); -webkit-backdrop-filter: blur(5px); opacity: 0; transition: opacity 0.4s ease-in-out; pointer-events: none; z-index: 99; display: none; }
.blur-backdrop.visible { display: block; opacity: 1; pointer-events: auto; }
#shop-popup.overlay.visible { display: flex; opacity: 1; }
#shop-content.shop-content-box { background-color: rgba(17, 24, 39, 0.97); padding: 1.5rem 2rem; border-radius: 1rem; border: 1px solid #4b5563; box-shadow: 0 10px 30px rgba(0, 0, 0, 0.6); max-width: 90%; width: 450px; position: relative; color: #e5e7eb; max-height: 90vh; overflow-y: auto; display: flex; flex-direction: column; }
#shop-close-button.shop-close-btn { position: absolute; top: 0.5rem; right: 0.75rem; background: none; border: none; color: #9ca3af; font-size: 2rem; line-height: 1; cursor: pointer; transition: color 0.2s ease; padding: 0.25rem; }
#shop-close-button.shop-close-btn:hover { color: #e5e7eb; }
#shop-title.shop-title-text { font-size: 1.75rem; font-weight: 700; margin-bottom: 0.5rem; text-align: center; }
#shop-player-score.shop-score-text { font-size: 1rem; font-weight: 600; margin-bottom: 1.5rem; text-align: center; color: #a5b4fc; }
#shop-items-container { margin-bottom: 1rem; }
.shop-section-title { font-size: 1.1rem; font-weight: 600; color: #9ca3af; text-transform: uppercase; letter-spacing: 0.05em; margin-top: 1rem; margin-bottom: 0.75rem; padding-bottom: 0.25rem; border-bottom: 1px solid #4b5563; text-align: left; }
.shop-section-items { display: flex; flex-wrap: wrap; gap: 1rem; justify-content: flex-start; }
.shop-item { background-color: rgba(55, 65, 81, 0.7); border: 2px solid #4b5563; border-radius: 0.75rem; padding: 0.75rem; cursor: pointer; transition: transform 0.2s ease, background-color 0.2s ease, border-color 0.2s ease, box-shadow 0.2s ease; display: flex; justify-content: center; align-items: center; width: 65px; height: 65px; position: relative; box-shadow: 0 2px 4px rgba(0,0,0,0.3); }
.shop-item:hover { background-color: rgba(75, 85, 99, 0.8); border-color: #6b7280; box-shadow: 0 4px 8px rgba(0,0,0,0.4); }
.shop-item-icon { font-size: 1.8rem; line-height: 1; }
.shop-item.disabled { opacity: 0.5; cursor: not-allowed; border-color: #374151; }
.shop-item.disabled:hover { background-color: rgba(55, 65, 81, 0.7); border-color: #374151; transform: none; box-shadow: 0 2px 4px rgba(0,0,0,0.3); }
.shop-item.purchased { border-color: #f59e0b; opacity: 0.7; cursor: default; }
.shop-item.purchased:hover { background-color: rgba(55, 65, 81, 0.7); border-color: #f59e0b; transform: none; box-shadow: 0 2px 4px rgba(0,0,0,0.3); }
.shop-item.max-level { border-color: #34d399; opacity: 0.8; cursor: default; }
.shop-item.max-level:hover { background-color: rgba(55, 65, 81, 0.7); border-color: #34d399; transform: none; box-shadow: 0 2px 4px rgba(0,0,0,0.3); }
#shop-tooltip.shop-tooltip-box { position: absolute; bottom: 1rem; left: 1rem; right: 1rem; background-color: rgba(17, 24, 39, 0.98); border: 1px solid #6b7280; border-radius: 0.5rem; padding: 1rem; color: #d1d5db; font-size: 0.9rem; text-align: left; z-index: 110; opacity: 0; visibility: hidden; transition: opacity 0.2s ease, visibility 0.2s ease; pointer-events: none; min-height: 80px; }
#shop-tooltip.shop-tooltip-box.visible { opacity: 1; visibility: visible; }
#tooltip-name.tooltip-item-name { font-size: 1.1rem; font-weight: 600; color: #f9fafb; margin-bottom: 0.25rem; }
#tooltip-level.tooltip-item-level { font-size: 0.85rem; color: #6ee7b7; margin-bottom: 0.25rem; font-weight: bold; }
#tooltip-effect.tooltip-item-effect { margin-bottom: 0.5rem; }
#tooltip-cost.tooltip-item-cost { font-weight: 600; color: #facc15; }
#tooltip-status.tooltip-item-status { font-style: italic; color: #fca5a5; margin-top: 0.5rem; }
.hidden { display: none !important; }


/* --- Cat Styles --- */
.cat { position: absolute; border-radius: 50%; background-color: #ccc; background-size: cover; background-position: center; transition: box-shadow 0.3s ease-out, width 0.3s ease-out, height 0.3s ease-out; cursor: grab; pointer-events: auto; user-select: none; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; will-change: transform; box-shadow: inset -2px -2px 5px rgba(0,0,0,0.3); }
.cat:active { cursor: grabbing; }
.glow-gray { box-shadow: inset -3px -3px 8px rgba(0,0,0,0.4), 1px 1px 3px rgba(0,0,0,0.2), 0 0 10px 4px rgba(180, 180, 180, 0.7); }
.glow-green { box-shadow: inset -3px -3px 8px rgba(0,0,0,0.4), 1px 1px 3px rgba(0,0,0,0.2), 0 0 12px 5px rgba(0, 255, 0, 0.7); }
.glow-blue { box-shadow: inset -3px -3px 8px rgba(0,0,0,0.4), 1px 1px 3px rgba(0,0,0,0.2), 0 0 12px 5px rgba(0, 150, 255, 0.7); }
.glow-violet { box-shadow: inset -3px -3px 8px rgba(0,0,0,0.4), 1px 1px 3px rgba(0,0,0,0.2), 0 0 14px 6px rgba(180, 0, 255, 0.65); }
.glow-orange { box-shadow: inset -3px -3px 8px rgba(0,0,0,0.4), 1px 1px 3px rgba(0,0,0,0.2), 0 0 15px 7px rgba(255, 140, 0, 0.7); }

/* --- Quiz UI Styles --- */

/* Main Quiz Wrapper */
.quiz-wrapper {
    position: relative;
    overflow: hidden;
    border-radius: 1rem;
    padding: 1.5rem;
    width: 90%;
    max-width: 600px;
    background-color: rgba(17, 24, 39, 0.7); /* Base semi-transparent background */
    backdrop-filter: blur(3px);
    border: 1px solid rgba(75, 85, 99, 0.5);
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4);
    /* Base pattern variables */
    --pattern-c0: hsla(210, 22%, 20%, 0.7);
    --pattern-c1: hsla(210, 16%, 30%, 0.7);
    --pattern-accent: hsla(30, 80%, 60%, 0.6);
    --pattern-transparent: hsla(0, 0%, 0%, 0);
    --pattern-size: 1em;
}

/* Inner Content Container */
.quiz-content-container {
    position: relative;
    z-index: 1; /* Ensures content is above pseudo-elements */
}

/* Z-index adjustments for inner elements */
.top-ui-container {
    position: relative;
    z-index: 2;
    background-color: rgba(55, 65, 81, 0.8); /* More solid background for readability */
    padding: 0.75rem;
    border-radius: 0.5rem;
    margin-bottom: 1rem;
}
#question-box.card {
    position: relative;
    z-index: 2;
}
#quiz-options {
    position: relative;
    z-index: 2;
}
#quiz-feedback {
    position: relative;
    z-index: 2;
}
.option-button {
    position: relative;
    z-index: 2;
}

/* Score, Lives, Combo Display Styles */
#quiz-lives-container { /* Style for lives display */ }
#quiz-score { /* Style for score display */ }
#quiz-combo { /* Style for combo display */ }
.question-text { /* Style for question text */ }
#quiz-feedback.text-green-400 { color: #34d399; }
#quiz-feedback.text-red-400 { color: #f87171; }
#quiz-feedback.text-blue-400 { color: #60a5fa; }

/* Card Glow Style (Only for Question Box) */
.card {
	position: relative;
	border-radius: var(--brad, 0.4rem);
	background: color-mix(in srgb, var(--bg, #333), #fff 5%);
	overflow: hidden;
    border: none;
    color: inherit;
    font: inherit;
    text-align: inherit;
    display: block;
    width: 100%;
    cursor: default;
}
.card .card__backdrop {
	--grad: hsl(from var(--bg, #333) h s l);
	position: absolute;
	inset: 0;
	background-image: radial-gradient(
			150% var(--gh, 0%) at 25% 100%,
			var(--grad),
			transparent
		),
		radial-gradient(
			150% calc(300% - var(--gh, 0%) + 25%) at 75% 100%,
			var(--grad),
			transparent
		);
	transition: --gh 1s ease;
    z-index: 1; /* Behind card content */
}
.card .card__backdrop::before {
	content: ""; position: absolute; inset: 0.1rem;
	background: rgba(0 0 0 / 0.2); border-radius: var(--brad, 0.4rem);
	backdrop-filter: blur(10px) contrast(1.5);
    z-index: 2;
}
.card .card__backdrop::after {
	--p: 0.12rem; --p2x: calc(var(--p) * 2);
	content: ""; position: absolute; inset: 0.15em;
	background-image: radial-gradient(circle at center, #000 50%, #fff 1px);
	background-size: var(--p2x) var(--p2x); border-radius: var(--brad, 0.4rem);
	mix-blend-mode: color-burn;
    z-index: 3; opacity: 0.5;
}
.card .card__content {
	position: relative; text-wrap: balance;
    z-index: 10; /* Above backdrop */
    padding: 1rem;
}
@keyframes wobble { from { --gh: 25%; } to { --gh: 300%; } }
#question-box.card { margin-bottom: 1rem; }
#question-box.card .card__content { display: flex; flex-direction: column; align-items: center; gap: 0.5rem; min-height: 4em; }
#question-box .difficulty-label { font-size: 0.7rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.05em; padding: 0.1rem 0.4rem; border-radius: 0.25rem; line-height: 1.2; background-color: rgba(107, 114, 128, 0.2); color: #9ca3af; }
/* Apply animation ONLY to question box backdrop */
#question-box.card .card__backdrop { animation: wobble 3s infinite alternate; }

/* 8-bit Style for Option Buttons */
.option-button {
    display: flex; align-items: center; justify-content: center; text-align: center;
    white-space: normal; word-wrap: break-word;
    padding: 1rem 1.2rem; min-height: 4rem; line-height: 1.3;
    color: white; font-family: 'Inter', sans-serif; font-weight: 500; font-size: 1rem;
    background-color: #3b82f6; border: 3px solid #1e293b;
    box-shadow: 4px 4px 0px #1e293b; border-radius: 0; cursor: pointer;
    transition: transform 0.1s ease, box-shadow 0.1s ease, background-color 0.1s ease;
    width: 100%; margin-bottom: 0.75rem;
}
.option-button:hover { transform: translate(2px, 2px); box-shadow: 2px 2px 0px #1e293b; background-color: #2563eb; }
.option-button:active { transform: translate(4px, 4px); box-shadow: none; background-color: #1d4ed8; }
.option-button:disabled { background-color: #6b7280; border-color: #374151; box-shadow: 2px 2px 0px #374151; color: #d1d5db; cursor: not-allowed; transform: none; }
.option-button.hinted { background-color: #4b5563; border-color: #1f2937; box-shadow: 2px 2px 0px #1f2937; opacity: 0.7; }
.option-button.hinted:hover, .option-button.hinted:active { transform: none; box-shadow: 2px 2px 0px #1f2937; background-color: #4b5563; }

/* --- Dynamic Background Patterns for Wrapper --- */

/* Base for pattern pseudo-elements */
.quiz-wrapper::before,
.quiz-wrapper::after {
    content: "";
    position: absolute;
    inset: 0;
    pointer-events: none;
    z-index: 0; /* Behind content */
}

/* Pattern 1: Masked Stripes */
.quiz-wrapper.quiz-bg-pattern-masked-stripes::before,
.quiz-wrapper.quiz-bg-pattern-masked-stripes::after {
    --i: 0; --noti: calc(1 - var(--i)); --sgni: calc(2*var(--i) - 1);
    --c0: var(--pattern-c0); --c1: var(--pattern-c1);
    --fill: linear-gradient(var(--c0), var(--c0));
    --strip-stop: 0.5em; --strip-f: calc(.125 + .25*var(--i));
    --strip-stop-0: calc(var(--strip-f)*var(--strip-stop));
    --strip-stop-1: calc(var(--strip-stop) - var(--strip-stop-0));
    --strip-end: var(--c0); --strip-mid: var(--pattern-transparent);
    --strip-list: var(--strip-end) 0, var(--strip-end) var(--strip-stop-0), var(--strip-mid) 0, var(--strip-mid) var(--strip-stop-1), var(--strip-end) 0, var(--strip-end) var(--strip-stop);
    background: linear-gradient(calc(var(--i)*180deg + 45deg), var(--c1), transparent);
    mask: var(--fill), repeating-linear-gradient(-45deg, var(--strip-list));
    mask-composite: exclude;
}
.quiz-wrapper.quiz-bg-pattern-masked-stripes::after { --i: 1; }

/* Pattern 2: Dual Dots */
.quiz-wrapper.quiz-bg-pattern-dual-dots { --pattern-size: 1.5em; }
.quiz-wrapper.quiz-bg-pattern-dual-dots::before,
.quiz-wrapper.quiz-bg-pattern-dual-dots::after {
    --i: 0; --noti: calc(1 - var(--i)); --sgni: calc(2*var(--i) - 1);
    --d: var(--pattern-size);
    --c0: var(--pattern-c0); --c1: var(--pattern-c1);
    --o0: calc(50% + var(--sgni)*.25*var(--d)); --o1: calc(50% - var(--sgni)*.25*var(--d));
    background: radial-gradient(circle, hsla(210, 22%, 20%, 0.5) 35%, transparent 37%) var(--o0) var(--o0), radial-gradient(circle, hsla(210, 16%, 30%, 0.5) 19%, transparent 21%) var(--o1) var(--o1);
    background-size: var(--d) var(--d);
}
.quiz-wrapper.quiz-bg-pattern-dual-dots::after { --i: 1; }

/* Pattern 3: Plaid Grid */
.quiz-wrapper.quiz-bg-pattern-plaid { --pattern-size: 3em; }
.quiz-wrapper.quiz-bg-pattern-plaid::before,
.quiz-wrapper.quiz-bg-pattern-plaid::after {
    --i: 0; --d: var(--pattern-size);
    --c0: hsla(210, 22%, 20%, 0.6);
    --strip-end: var(--c0); --strip-mid: var(--pattern-transparent);
    --strip-stop: 1px;
    --strip-list: var(--strip-end) 0, var(--strip-end) var(--strip-stop), var(--strip-mid) 0, var(--strip-mid) calc(var(--d) - var(--strip-stop)), var(--strip-end) 0;
    background: repeating-linear-gradient(calc(var(--i)*90deg), var(--strip-list));
}
.quiz-wrapper.quiz-bg-pattern-plaid::after { --i: 1; }

/* Pattern 4: Conic Stripes */
.quiz-wrapper.quiz-bg-pattern-conic-stripes { --pattern-size: 4em; }
.quiz-wrapper.quiz-bg-pattern-conic-stripes::before,
.quiz-wrapper.quiz-bg-pattern-conic-stripes::after {
    --i: 0; --sgni: calc(2*var(--i) - 1); --d: var(--pattern-size);
    --c0: hsla(210, 22%, 20%, 0.5);
    --strip-end: var(--c0); --strip-mid: var(--pattern-transparent);
    --strip-stop: 0.2em;
    --strip-list: var(--strip-end) 0, var(--strip-end) var(--strip-stop), var(--strip-mid) 0;
    background: repeating-linear-gradient(calc(var(--sgni)*-45deg), var(--strip-list));
    mask: repeating-conic-gradient(hsl(0,0%,0%) 0% 12.5%, var(--pattern-transparent) 0% 25%);
    mask-size: var(--d) var(--d);
}
.quiz-wrapper.quiz-bg-pattern-conic-stripes::after { --i: 1; }

/* Pattern 5: Joint Stripes */
.quiz-wrapper.quiz-bg-pattern-joint-stripes { --pattern-size: 4em; }
.quiz-wrapper.quiz-bg-pattern-joint-stripes::before,
.quiz-wrapper.quiz-bg-pattern-joint-stripes::after {
    --i: 0; --noti: calc(1 - var(--i)); --sgni: calc(2*var(--i) - 1);
    --d: var(--pattern-size); --c0: var(--pattern-c0); --c1: var(--pattern-c1);
    --fill: linear-gradient(var(--c0), var(--c0));
    --o: calc(50% - .5*var(--d));
    --strip-stop: calc(2*var(--d)/1.414); --strip-end: var(--c0); --strip-mid: var(--pattern-transparent);
    --strip-f: .25; --strip-stop-0: calc(var(--strip-f)*var(--strip-stop)); --strip-stop-1: calc(var(--strip-stop) - var(--strip-stop-0));
    --strip-list: var(--strip-end) 0, var(--strip-end) var(--strip-stop-0), var(--strip-mid) 0, var(--strip-mid) var(--strip-stop-1), var(--strip-end) 0, var(--strip-end) var(--strip-stop);
    background: repeating-linear-gradient(calc(var(--sgni)*45deg), var(--strip-list));
    --joint-end: hsl(0,0%,0%); --joint-mid: transparent; --joint-stop: 25%;
    --joint-list: var(--joint-end) var(--joint-stop), var(--joint-mid) 0;
    --joint-0: linear-gradient(135deg, var(--joint-list)); --joint-3: linear-gradient(45deg, var(--joint-list));
    mask: var(--fill), var(--joint-3), var(--joint-3), var(--joint-0), var(--joint-0);
    mask-position: 50%, var(--o) var(--o), var(--o) var(--o);
    mask-size: auto, var(--d) var(--d), var(--d) var(--d);
    mask-composite: exclude;
}
.quiz-wrapper.quiz-bg-pattern-joint-stripes::after { --i: 1; }

/* Pattern 6: Radial Stripes */
.quiz-wrapper.quiz-bg-pattern-radial-stripes { --pattern-size: 5em; }
.quiz-wrapper.quiz-bg-pattern-radial-stripes::before,
.quiz-wrapper.quiz-bg-pattern-radial-stripes::after {
    --i: 0; --noti: calc(1 - var(--i)); --sgni: calc(2*var(--i) - 1);
    --d: var(--pattern-size); --c0: var(--pattern-c0);
    --strip-stop: calc(.1*var(--d)); --strip-end: var(--c0); --strip-mid: var(--pattern-transparent);
    --strip-list: var(--strip-end) 0, var(--strip-end) var(--strip-stop), var(--strip-mid) 0;
    background: repeating-linear-gradient(calc(var(--sgni)*45deg), var(--strip-list));
    --o: calc(50% - var(--i)*.5*var(--d));
    --joint-end: hsl(0,0%,0%); --joint-mid: transparent; --joint-stop: calc(.275*var(--d));
    --joint-list: var(--joint-end) var(--joint-stop), var(--joint-mid) 0;
    mask: radial-gradient(var(--joint-list));
    mask-position: var(--o) var(--o); mask-size: var(--d) var(--d);
}
.quiz-wrapper.quiz-bg-pattern-radial-stripes::after { --i: 1; }

/* Pattern 7: Honeycomb */
.quiz-wrapper.quiz-bg-pattern-honeycomb { --pattern-size: 0.5em; --pattern-c0: hsla(210, 40%, 30%, 0.6); --pattern-c1: hsla(40, 100%, 60%, 0.5); }
.quiz-wrapper.quiz-bg-pattern-honeycomb::before,
.quiz-wrapper.quiz-bg-pattern-honeycomb::after {
    --i: 0; --noti: calc(1 - var(--i)); --sgni: calc(2*var(--i) - 1);
    --strip-stop: var(--pattern-size);
    --strip-end: var(--pattern-c0); --strip-mid: var(--pattern-c1);
    --strip-f: .25; --strip-stop-0: calc(var(--strip-f)*var(--strip-stop)); --strip-stop-1: calc(var(--strip-stop) - var(--strip-stop-0));
    --strip-list: var(--strip-end) 0, var(--strip-end) var(--strip-stop-0), var(--strip-mid) 0, var(--strip-mid) var(--strip-stop-1), var(--strip-end) 0, var(--strip-end) var(--strip-stop);
    --ang: calc(var(--sgni)*60deg);
    background: repeating-linear-gradient(var(--ang), var(--strip-list));
    filter: blur(1px);
    mask: repeating-conic-gradient(from calc((var(--noti) + .5)*60deg), hsl(0,0%,0%) 0deg 60deg, transparent 0deg 180deg);
}
.quiz-wrapper.quiz-bg-pattern-honeycomb::after { --i: 1; }

/* Pattern 8: Circuit */
.quiz-wrapper.quiz-bg-pattern-circuit { --pattern-size: 5em; }
.quiz-wrapper.quiz-bg-pattern-circuit::before,
.quiz-wrapper.quiz-bg-pattern-circuit::after {
    --i: 0; --noti: calc(1 - var(--i)); --sgni: calc(2*var(--i) - 1);
    --d: var(--pattern-size); --c0: var(--pattern-c0); --c1: var(--pattern-c1);
    --l: calc(.05*var(--d)*1.414);
    background: linear-gradient(calc(var(--sgni)*90deg), var(--c1), var(--c0)) calc(50% - .5*var(--d))/var(--d) var(--d);
    --joint-end: hsl(0,0%,0%); --joint-mid: transparent; --joint-stop: 25%;
    --circ-list: var(--joint-end) var(--joint-stop), var(--joint-mid) 0;
    mask: radial-gradient(var(--circ-list)), linear-gradient(calc(-90deg - var(--sgni)*45deg), var(--circ-list)), linear-gradient(calc(90deg - var(--sgni)*45deg), var(--circ-list));
    mask-position: 50%, 50%, 50% calc(50% - .5*var(--d));
    mask-size: var(--l) var(--l), var(--d) var(--d), var(--d) var(--d);
    mask-composite: intersect;
}
.quiz-wrapper.quiz-bg-pattern-circuit::after { --i: 1; }

/* Pattern 9: Chevron Gradient */
.quiz-wrapper.quiz-bg-pattern-chevron-gradient { --pattern-size: 3em; }
.quiz-wrapper.quiz-bg-pattern-chevron-gradient::before,
.quiz-wrapper.quiz-bg-pattern-chevron-gradient::after {
    --i: 0; --sgni: calc(2*var(--i) - 1); --d: var(--pattern-size);
    --c0: var(--pattern-c0); --fill: linear-gradient(var(--c0), var(--c0));
    --strip-end: var(--c0); --strip-mid: var(--pattern-transparent); --strip-stop: 4px;
    --strip-list: var(--strip-end) 0, var(--strip-end) var(--strip-stop), var(--strip-mid) 0;
    background: repeating-linear-gradient(calc(var(--sgni)*45deg), var(--strip-list));
    --joint-end: hsl(0,0%,0%); --joint-mid: transparent; --joint-stop: 25%;
    --joint-list: var(--joint-end) var(--joint-stop), var(--joint-mid) 0;
    mask: var(--fill), linear-gradient(115deg, var(--joint-list)), linear-gradient(115deg, var(--joint-list)), linear-gradient(245deg, var(--joint-list)), linear-gradient(245deg, var(--joint-list));
    mask-position: 0 0, calc(.25*var(--d)) calc(-.5*var(--d)), calc(.25*var(--d)) calc(-.5*var(--d));
    mask-size: auto, calc(.5*var(--d)) var(--d), calc(.5*var(--d)) var(--d);
    mask-composite: exclude;
}
.quiz-wrapper.quiz-bg-pattern-chevron-gradient::after { --i: 1; }

/* Pattern 10: Woven */
.quiz-wrapper.quiz-bg-pattern-woven { --pattern-size: 6em; }
.quiz-wrapper.quiz-bg-pattern-woven::before,
.quiz-wrapper.quiz-bg-pattern-woven::after {
    --i: 0; --noti: calc(1 - var(--i)); --sgni: calc(2*var(--i) - 1);
    --d: var(--pattern-size); --c0: var(--pattern-c0);
    --strip-end: var(--c0); --strip-mid: var(--pattern-transparent);
    --strip-stop: calc(.125*var(--d)); --strip-f: .125;
    --strip-list: var(--strip-end) 0, var(--strip-end) var(--strip-stop), var(--strip-mid) 0;
    background: repeating-linear-gradient(calc(var(--sgni)*45deg), var(--strip-list));
    --mask-fill: linear-gradient(white, white);
    --side-end: white; --side-mid: transparent; --side-stop: var(--d);
    --side-list: var(--side-end) 0, var(--side-end) var(--strip-stop), var(--side-mid) 0;
    mask: var(--mask-fill), repeating-linear-gradient(var(--side-list)), repeating-linear-gradient(90deg, var(--side-list));
    mask-size: auto, var(--d) var(--d), var(--d) var(--d);
    mask-composite: exclude;
}
.quiz-wrapper.quiz-bg-pattern-woven::after { --i: 1; }


/* --- Body State Styles (Controls Side Controls Visibility) --- */
body:not(.state-quizgameplay) #right-controls { display: none; }
body.state-quizgameplay #right-controls { display: flex; }

/* --- Main Menu & Game Over Styles --- */
.main-menu-title { font-size: 2.5rem; font-weight: bold; margin-bottom: 2rem; color: #fde047; text-shadow: 1px 1px 3px rgba(0,0,0,0.5); }
.play-button { padding: 0.8rem 2rem; font-size: 1.2rem; font-weight: bold; color: white; background-color: #3b82f6; border: none; border-radius: 0.5rem; cursor: pointer; transition: background-color 0.2s ease, transform 0.1s ease; box-shadow: 0 4px 6px rgba(0,0,0,0.3); }
.play-button:hover { background-color: #2563eb; }
.play-button:active { transform: translateY(1px); box-shadow: 0 2px 3px rgba(0,0,0,0.3); }
.game-over-container { /* Additional styles if needed */ }
.game-over-text { /* Additional styles if needed */ }
.final-score { /* Additional styles if needed */ }
.restart-prompt { /* Additional styles if needed */ }
